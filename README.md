# PRMSE paper

This is a repository containing the code for the PRMSE paper.

## Paper

The paper draft is on Overleaf:  https://www.overleaf.com/3645379311byhfvpvjczht

## Getting Started

1. Create a conda environment called by running `conda env create -f environment.yml`. This command might take a few minutes. Please wait for it to finish.

2. Activate this new environment by running `conda activate prmse`.

3. Check out the paper source from overleaf in the directory of your choice. You can do this in two ways: 
    - Downloading directly from the Overleaf GUI (Menu -> Download -> Source) and then uncompressing the downloaded zip file
    - Cloning via git: `git clone https://git.overleaf.com/5e47136080724900019c0cf0`. You'll need your overleaf username and password.

4. Create a symlink named `paper_overleaf` to the directory with the paper source. This symlink should be at the same level as this README file in your working copy. By doing this, the figures generated by the code will be available directly to the paper.

## Analyses

### Data

The raw data for the paper is stored in this OneDrive folder: https://etsorg1-my.sharepoint.com/:f:/g/personal/aloukina_ets_org/EpfEwBs2FT5Gpvfive_L3GQBrB4fV3Z5eyjve4luKarxwA?e=pf7bkg

### Simulations

Simulated data is stored under `data`. There are 3 main files:

- `data.csv` - main data file with human and system scores for each response
- `raters.csv` - metadata file containing information about simulated raters
- `systems.csv` - metadata file containing information about simulated systems

The code for the simulations is divided into notebooks.  The first notebook is used to simulate the data
while the rest of the notebook are organized by how many human raters and systems are used in each
analyses. Note that the structure of the notebooks does not follow the order of analyses in the paper. For example, in the paper we first show the gaps in traditional metrics and then demonstrate that PRMSE can help address those. However, In the notebooks, it is more efficient to keep the analyses with and without PRMSE in the same notebook as long as they use the same data. 

1. `simulate_data`

    This is the notebook used to simulate the data using the configuration settings stored in `notebooks/settings.json`. The json file defines various parameters for the simulation.

    Note that the data is simulated by sampling from normal distribution using fixed seed. Changes to the code in this notebook are likely to change the simulated data.  The data is stored on Bitbucket to track any changes.

2. `exp_1A2H`

    Notebook containing simulations that evaluate the same system against multiple pairs of raters.

3. `exp_NA2H` 

    Notebook containing simulations that evaluate multiple systems against different pairs of raters.

4. `exp_1ANH`

    Notebook containing simulations that evaluatethe same system against an increasing number of raters.
